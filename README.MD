### protoc-gen-1c
`protoc-gen-1c` ‚Äî —ç—Ç–æ –ø–ª–∞–≥–∏–Ω –¥–ª—è [protoc](https://github.com/protocolbuffers/protobuf), –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTTP-—Å–µ—Ä–≤–∏—Å—ã 1–° –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ protobuf.


### üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
* [–ó–∞—á–µ–º –Ω—É–∂–µ–Ω protoc-gen-1c](#–∑–∞—á–µ–º-–Ω—É–∂–µ–Ω-protoc-gen-1c)
* [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
* [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞–≥–∏–Ω–∞](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–ø–ª–∞–≥–∏–Ω–∞)
* [–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è protobuf](#–∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è-protobuf)
* [Swagger](#swagger)
* [Buf: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#buf-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
* [Protolint](#protolint)
* [–í–∏–¥–µ–æ](#–≤–∏–¥–µ–æ)


---
### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω protoc-gen-1c
–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ protobuf –¥–∞–µ—Ç —Ä—è–¥ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤:
1. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ API (—Å–º. [Buf](#buf-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)).
2. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ —Å—Ç—Ä–æ–≥–∏–π —Ñ–æ—Ä–º–∞—Ç –æ–ø–∏—Å–∞–Ω–∏—è API.
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
4. –ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `protoc`. –°–∫–∞—á–∞—Ç—å `protoc` –º–æ–∂–Ω–æ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã [—Ä–µ–ª–∏–∑–æ–≤](https://github.com/protocolbuffers/protobuf/releases)
2. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è `.proto` —Ñ–∞–π–ª–æ–≤:
   1. [grpc-gateway](https://github.com/grpc-ecosystem/grpc-gateway)
   2. [googleapis](https://github.com/googleapis/googleapis)
3. –°–æ–±–µ—Ä–∏—Ç–µ `protoc-gen-1c` 
   ```bash
   go build -o protoc-gen-1c.exe ./cmd/main.go
   # –∏–ª–∏
   go install github.com/LazarenkoA/protoc-gen-1c
   ```
4. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π `.proto` —Ñ–∞–π–ª (—Å–º. [example.proto](/proto/example.proto)). 
–†—è–¥–æ–º –¥–æ–ª–∂–µ–Ω –ª–µ–∂–∞—Ç—å [custom.proto](/proto/custom.proto), –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `import`.
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
   ```bash
   protoc -I="D:\protobuf\include" -I="./proto" -I="D:\GIT\googleapis" -I="D:\GIT\grpc-gateway" \
     --1c_out="swagger=1,logger=1:." example.proto
   ```
   –ó–¥–µ—Å—å `-I` —É–∫–∞–∑—ã–≤–∞—é—Ç –ø—É—Ç–∏ –∫ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º `grpc-gateway` –∏ `googleapis`.
6. –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ—è–≤—è—Ç—Å—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–¥.<br>
   ‚ö†Ô∏è –ú–æ–¥—É–ª–∏ —Å –ø–æ–º–µ—Ç–∫–æ–π `"–ù–ï –†–ï–î–ê–ö–¢–ò–†–û–í–ê–¢–¨!"` –∏–∑–º–µ–Ω—è—Ç—å –Ω–µ–ª—å–∑—è ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã.
   –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ –º–æ–¥—É–ª—è—Ö –≤–∏–¥–∞ `<–ò–º—èHttp–°–µ—Ä–≤–∏—Å–∞>–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–π`.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞–≥–∏–Ω–∞
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
* `swagger=1` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger-—Å–µ—Ä–≤–∏—Å–∞.
* `logger=1` ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏).

–ü—Ä–∏–º–µ—Ä—ã:
```bash
--1c_out="swagger=1,logger=1:."   # –≤–∫–ª—é—á–µ–Ω—ã –æ–±–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
--1c_out="swagger=1:."            # –≤–∫–ª—é—á–µ–Ω —Ç–æ–ª—å–∫–æ Swagger
--1c_out="logger=1:."             # –≤–∫–ª—é—á–µ–Ω —Ç–æ–ª—å–∫–æ –ª–æ–≥–≥–µ—Ä
--1c_out="."                      # –æ—Ç–∫–ª—é—á–µ–Ω—ã –æ–±–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
--1c_out="swagger=0,logger=0:."   # —Ç–æ –∂–µ —Å–∞–º–æ–µ
```


### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è protobuf
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ü–∏–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —ç—Ç–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞:
* `[(required) = true]` ‚Äî –ø–æ–º–µ—á–∞–µ—Ç –ø–æ–ª–µ –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ (–≤ 1–° –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤ Swagger –æ–Ω–æ –±—É–¥–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º).
* `option (codes)` ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å HTTP-–∫–æ–¥—ã –æ—Ç–≤–µ—Ç–∞:
* `option (base_url)` ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ —Å–≤–æ–π—Å—Ç–≤–æ "–ö–æ—Ä–Ω–µ–≤–æ–π URL" http —Å–µ—Ä–≤–∏—Å–∞
* `option (configuration_catalog)` ‚Äî –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É —Å –≤—ã–≥—Ä—É–∂–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π (–≤—ã–≥—Ä—É–∂–µ–Ω–Ω–æ–π –≤ —Ñ–∞–π–ª—ã)


### Swagger
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `swagger=1` —Å–æ–∑–¥–∞–µ—Ç—Å—è HTTP-—Å–µ—Ä–≤–∏—Å —Å OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YAML`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å:

–†–∞–∑–≤–µ—Ä–Ω—É–≤ [swagger-ui](https://github.com/swagger-api/swagger-ui) on-premise: <br>
https://localhost/swagger/?url=http://localhost/test/hs/swagger/doc#/ <br>
(–º–æ–∂–Ω–æ –ø–æ–∏–≥—Ä–∞—Ç—å—Å—è —Å –ª–æ–∫–∞–ª—å–Ω—ã–º http —Å–µ—Ä–≤–∏—Å–æ–º [swaggerUI](/swagger/swaggerUI))

–ò—Å–ø–æ–ª—å–∑—É—è –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å:<br>
https://petstore.swagger.io/?url=http://localhost/test/hs/swagger/doc#/<br>
‚ö†Ô∏è –ü—Ä–∏ —ç—Ç–æ–º Swagger-—Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ –∏ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–ü—Ä–∏–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:<br>
<img width="500"  alt="Image" src="https://github.com/user-attachments/assets/7df68aa7-6abb-4c79-a658-07d964c8169a" />

<img width="500" alt="Image" src="https://github.com/user-attachments/assets/6e392dec-a791-4581-b553-19d2552e580c" />


### Buf: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
[Buf](https://github.com/bufbuild/buf) ‚Äî –ª–∏–Ω—Ç–µ—Ä –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ protobuf.<br>
–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ ([buf.yaml](buf.yaml)) –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

```bash
buf dep update # —Å–∫–∞—á–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω—É–∂–µ–Ω –ø—Ä–æ–∫—Å–∏)
```
–í–æ–∑–º–æ–∂–Ω–∞ –æ—à–∏–±–∫–∞ 403 –∏–∑-–∑–∞ [IP-–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫](https://buf.build/docs/bsr/authentication/#ip-address-blocking)<br>
–í PowerShell –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–æ–∫—Å–∏:
```bash
$env:HTTPS_PROXY="http://localhost:8081"
```

**–ö–æ–º–∞–Ω–¥—ã**
```bash
buf lint     # –ª–∏–Ω—Ç–∏–Ω–≥
buf breaking --against '.git#branch=master' # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (–æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
```


### Protolint
[protolint](https://github.com/yoheimuta/protolint) –µ—â–µ –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ª–∏–Ω—Ç–µ—Ä –¥–ª—è protobuf –∏ –æ–Ω –∫—É–¥–∞ –ø—Ä–æ—â–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —á–µ–º buf.<br>
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å—Ç–∏–ª—è (`-fix`).

–ü—Ä–∏–º–µ—Ä:
```bash
protolint lint -fix ./proto
```
–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ Docker. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [README](https://github.com/yoheimuta/protolint)


### –í–∏–¥–µ–æ
https://github.com/user-attachments/assets/d0462899-96d5-462e-8a97-484d5fe41cdb
